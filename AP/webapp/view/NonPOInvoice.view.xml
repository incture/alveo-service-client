<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" controllerName="com.menabev.AP.controller.NonPOInvoice"
	xmlns:html="http://www.w3.org/1999/xhtml" xmlns:l="sap.ui.layout" xmlns:u="sap.ui.unified">
	<Page title="Title" class="sapUiSizeCompact page">
		<customHeader>
			<OverflowToolbar class="incturePrimaryClass">
				<!--<content>-->
				<Button icon="sap-icon://nav-back" class="inctureIconClass" press="onNavBack"/>
				<Title text="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/requestId}" class="inctureTitleClass inctureMarginLeftTitleClass"></Title>
				<SegmentedButton selectedKey="invoice" selectionChange="toggleHdrLayout" id="idSegmented" class="sapUiLargeMarginEnd segmentbtn"
					visible="false">
					<items>
						<SegmentedButtonItem text="{i18n>Invoice}" key="invoice" class="segItembtn"/>
						<SegmentedButtonItem text="{i18n>PDFData}" key="abby" class="segItembtn"/>
					</items>
				</SegmentedButton>
				<ToolbarSpacer/>
				<Label text="{i18n>InvoiceAmount}" design="Bold" required="true"
					class="inctureToolbarLabelClass boldFont sapUiLargeMarginBegin lvlPositioninvoiceamt"/>
				<Text
					text="{path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency',formatter:'com.menabev.AP.util.formatter.currencySymbolWithValue'}"/>
				<Input change="hdrInvAmtCalu" width="120px" type="Number" value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/invoiceTotal}"
					valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/invoiceTotal}"/>
				<Label text="{i18n>GrossAmt}" design="Bold"/>
				<Text
					text="{path :'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency', formatter:'com.menabev.AP.util.formatter.currencySymbolWithValue'}"
					tooltip="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency}"/>
				<Input width="9%" enabled="false" textAlign="Right"
					value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/grossAmount', type: 'sap.ui.model.type.Float'}"/>
				<Label text="{i18n>balance}" design="Bold"/>
				<Text
					text="{path :'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency', formatter:'com.menabev.AP.util.formatter.currencySymbolWithValue'}"
					tooltip="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency}"/>
				<Input width="9%" enabled="false" textAlign="Right"
					value="{path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/balance', type: 'sap.ui.model.type.Float'}"/>
				<Button icon="sap-icon://process" tooltip="{i18n>showTracker}" visible="false"/>
				<!--</content>-->
			</OverflowToolbar>
		</customHeader>
		<content>
			<VBox>
				<VBox id="invoiceDetailTab" class="sapUiTinyMargin nonPOHeader">
					<Toolbar height="3rem">
						<Title level="H2" text="{i18n>InvoiceHeaderDetails}" class="headerTitle sapUiTinyMarginBegin"/>
						<ToolbarSpacer/>
						<!--<Button text="upload invoice" press="onUploadInvoice" class="SecondaryBtn"/>-->
						<Button text="{i18n>VendorBalances}" press="onClickVendorBalances" class="sapUiSizeCompact SecondaryBtn" enabled="false"/>
						<Button icon="sap-icon://activity-individual" tooltip="{i18n>ActivityLog}" press="onClickActivityLog" class="SecondaryBtn" enabled="false"/>
						<Button icon="sap-icon://notification-2" tooltip="{i18n>ErrorMessages}" press="onClickErrorMessages" class="SecondaryBtn" enabled="false"/>
						<Button text="{i18n>OpenPdf}" type="Emphasized" id="idOpenPDFBtn" enabled="{oInvoiceModel>/bPdfBtn}" tooltip="Open Pdf"
							press="onPressOpenpdf" class="sapUiSizeCompact btnEmphasized"/>
						<Button icon="sap-icon://refresh" press="onPressRefresh" class="SecondaryBtn" enabled="false"/>
					</Toolbar>
					<l:Grid id="grid" defaultSpan="L3 M6 S12" class="inctureGridClass" width="100%">
						<l:content>
							<VBox>
								<Label text="{i18n>VendorId}" design="Bold" required="true" class="sapUiTinyMarginTop"/>
								<Input filterSuggests="false" maxLength="10" value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorId}"
									valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/vendorId}" type="Text" showSuggestion="true" suggest="fnVendorIdSuggest"
									suggestionItemSelected="searchVendorAddr" change="onChangeVendorId" suggestionItems="{searchVendorModel>/d/results}" width="80%">
									<suggestionItems>
										<core:ListItem text="{ path:'searchVendorModel>Vendor', formatter:'com.menabev.AP.util.formatter.removeZero'}"
											additionalText="{searchVendorModel>Name1}"/>
									</suggestionItems>
								</Input>
							</VBox>
							<VBox>
								<Label text="{i18n>VendorName}" design="Bold" class="sapUiTinyMarginTop"/>
								<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorName}" width="80%"/>
							</VBox>
							<VBox>
								<Label required="true" design="Bold" text="{i18n>InvoiceNo}" class="sapUiTinyMarginTop"/>
								<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/extInvNum}" width="80%" change="onChangeInvNumber" maxLength="16"
									valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/extInvNum}"/>
							</VBox>
							<VBox id="idDate">
								<Label design="Bold" text="{i18n>InvoiceDate}" required="true" class="sapUiTinyMarginTop"/>
								<DatePicker editable="{nonPOInvoiceModel>/userFldValidate}" id="InvoiceDate" placeholder="MM/DD/YYYY" valueFormat="yyyy-MM-dd"
									displayFormat="MM/dd/YYYY" visible="{nonPOInvoiceModel>/purchaseOrderVis}" width="80%" change="onChangeInvDate"
									value="{ path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/invoiceDate',formatter: 'com.menabev.AP.util.formatter.getDate'}"
									valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/invoiceDate}"/>
							</VBox>
							<VBox>
								<Label design="Bold" text="{i18n>BatchId}"/>
								<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/ocrBatchId}" width="80%"/>
							</VBox>
							<VBox >
								<Label text="{i18n>PostingDate}" design="Bold" required="true" visible="{nonPOInvoiceModel>/purchaseOrderVis}"/>
								<DatePicker displayFormat="MM/dd/YYYY" valueFormat="yyyy-MM-dd" width="80%"
									valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/postingDate}"
									value="{ path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/postingDate',formatter: 'com.menabev.AP.util.formatter.getDate'}"
									change="onPostingDateChange"/>
							</VBox>
							<VBox >
								<Label text="{i18n>DueDate}" design="Bold" visible="{nonPOInvoiceModel>/purchaseOrderVis}"/>
								<DatePicker editable="{nonPOInvoiceModel>/userFldValidate}" placeholder="MM/DD/YYYY" id="baseLineDate"
									value="{nonPOInvoiceModel>/invoiceDetailUIDto/baseLineDate1}" valueFormat="yyyy-MM-dd" displayFormat="MM/dd/YYYY"
									visible="{nonPOInvoiceModel>/purchaseOrderVis}" width="80%"/>
							</VBox>
							<VBox >
								<Label text="{i18n>PaymentTerms}" design="Bold" visible="{nonPOInvoiceModel>/purchaseOrderVis}"/>
								<Select forceSelection="false" showSecondaryValues="true" selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/paymentTerms}"
									items="{paymentModel>/d/results}" width="80%">
									<items>
										<core:ListItem key="{paymentModel>PaymentTerms}" text="{paymentModel>Vendor}" additionalText="{paymentModel>CompCode}"/>
									</items>
								</Select>
							</VBox>
							<VBox >
								<Label text="{i18n>PaymentMethod}" design="Bold" visible="{nonPOInvoiceModel>/purchaseOrderVis}"/>
								<Select visible="{nonPOInvoiceModel>/purchaseOrderVis}" forceSelection="false" showSecondaryValues="true"
									selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/paymentMethod}" items="{paymentMethodModel>/d/results}" width="80%">
									<items>
										<core:ListItem key="{paymentMethodModel>PaymentMeth}" text="{paymentMethodModel>PaymentMethDesc}"
											additionalText="{paymentMethodModel>VdrPaymentMeth}"/>
									</items>
								</Select>
							</VBox>
							<VBox>
								<Label text="{i18n>PaymentBlock}" design="Bold" visible="true"/>
								<Select forceSelection="false" visible="true" id="paymentBlockComBox" showSecondaryValues="true"
									selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/paymentBlock}" items="{paymentBlockModel>/d/results}" width="80%">
									<items>
										<core:ListItem key="{paymentBlockModel>VdrPaymentBlock}" text="{paymentBlockModel>PaymentBlockDesc}"
											additionalText="{paymentBlockModel>PaymentBlock}"/>
									</items>
								</Select>
							</VBox>
							<!--<VBox>-->
							<!--	<Label text="{i18n>TaxCode}" design="Bold" class="sapUiTinyMarginTop"/>-->
							<!--	<Input id="taxCodeId" showValueHelp="true" valueHelpOnly="true" valueHelpRequest="onValueHelpRequest" width="80%"-->
							<!--		value="{nonPOInvoiceModel>/invoiceDetailUIDto/taxCode}" >-->
							<!--	</Input>-->
							<!--</VBox>-->
						</l:content>
					</l:Grid>
				</VBox>
				<VBox class="tableBox sapUiTinyMargin">
					<Toolbar height="3rem">
						<ToolbarSpacer/>
						<Button text="{i18n>ManageTemplates}" press="onClickManageTemplate"/>
						<Button text="{i18n>SelectTemplate}" tooltip="Select Template"
							visible="{parts:[{ path :'nonPOInvoiceModel>/hasDeliveryVendor'}, { path :'nonPOInvoiceModel>/isThirdParty'}], formatter:'com.menabev.AP.util.formatter.reverseThirdMsg' }"
							press="onSelectTemplate" class="sapUiSizeCompact SecondaryBtn"/>
						<Button text="{i18n>AddRow}" tooltip="{i18n>AddItems}" id="addId" icon="sap-icon://add" class="SecondaryBtn" press="addItem"/>
						<Button icon="sap-icon://excel-attachment" tooltip="{i18n>DownloadExcel}" press="onDataExportExcel" class="SecondaryBtn"/>
						<Button icon="sap-icon://upload" tooltip="{i18n>ImportFromExcel}" press="openFileExplorer" class="SecondaryBtn" enabled="false"/>
						<Button icon="sap-icon://action-settings" press="onPressPersonalization" class="SecondaryBtn" enabled="false"/>
					</Toolbar>
					<!--<Panel class="sapUiResponsiveMargin inboxpanelCSS">-->
					<core:Fragment fragmentName="com.menabev.AP.fragment.NonPOCostCenter" type="XML" id="prefix1"/>
				</VBox>
				<VBox class="tableBox sapUiTinyMargin">
					<l:Grid defaultSpan="L12 M12 S12">
						<Toolbar width="100%">
							<HBox>
								<Label text="{i18n>SubTotal}" design="Bold" class="sapUiTinyMarginTop"/>
								<Input width="9.5rem" enabled="false"
									value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/grossAmount', type: 'sap.ui.model.type.Float'}"
									class="sapUiMediumMarginBegin"></Input>
							</HBox>
							<HBox class="sapUiMediumMarginBegin">
								<Label text="{i18n>Tax}" design="Bold" class="sapUiTinyMarginTop"/>
								<Input width="4rem" value="0.00" enabled="false" class="sapUiMediumMarginBegin"></Input>
								<Text text="/{taxModel>/netTaxValue}" class="sapUiTinyMarginTop sapUiMediumMarginBegin"></Text>
								<Button class="SecondaryBtn" press="openTaxDetails" type="Emphasized" icon="sap-icon://notes" tooltip="{i18n>TaxDetails}"></Button>
							</HBox>
							<HBox class="sapUiMediumMarginBegin">
								<Label text="{i18n>Freight}" design="Bold" class="sapUiTinyMarginTop"></Label>
								<Input width="9.5rem" value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/shippingCost', type: 'sap.ui.model.type.Float'}"
									enabled="false" class="sapUiMediumMarginBegin"></Input>
							</HBox>
							<HBox class="sapUiMediumMarginBegin">
								<Label text="{i18n>Surcharges}" design="Bold" class="sapUiTinyMarginTop"></Label>
								<Input width="9.5rem" value="0.00" enabled="false" class="sapUiMediumMarginBegin"></Input>
							</HBox>
							<HBox class="sapUiMediumMarginBegin">
								<Label text="{i18n>GrossAmt}" design="Bold" class="sapUiTinyMarginTop"></Label>
								<Input width="9.5rem" value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/grossAmount', type: 'sap.ui.model.type.Float'}"
									enabled="false" class="sapUiMediumMarginBegin"></Input>
							</HBox>
						</Toolbar>
					</l:Grid>
				</VBox>
			</VBox>
			<VBox class="tableBox sapUiTinyMargin">
				<Toolbar class="boxToolBar" height="3rem">
					<Title level="H2" text="{i18n>AdditionalDetails}" class="headerTitle sapUiTinyMarginBegin"/>
				</Toolbar>
				<VBox id="attachmentTab" class="sapUiTinyMargin">
					<Toolbar height="3rem">
						<Text text="{i18n>Attachments}"/>
						<ToolbarSpacer/>
						<u:FileUploader id="fileUploader" style="Transparent" maximumFileSize="5" fileType="{nonPOInvoiceModel>/attachFileType}"
							icon="sap-icon://add" buttonText="{i18n>AddAttachments}" buttonOnly="true" typeMissmatch="handleTypeMisMatch"
							fileSizeExceed="attachFileSizeExceed" change="onBeforeUploadStarts"/>
					</Toolbar>
					<VBox class="shadow">
						<VBox width="100%" items="{nonPOInvoiceModel>/docManagerDto}">
							<Toolbar class="atachmentCls sapUiSmallMargin">
								<FeedListItem sender="{nonPOInvoiceModel>fileName}" iconDensityAware="false" activeIcon="{nonPOInvoiceModel>folderName}"
									senderPress="fnUploadDoc"></FeedListItem>
								<ToolbarSpacer></ToolbarSpacer>
								<Button icon="sap-icon://delete" press="fnDeleteAttachment" width="10%"/>
							</Toolbar>
						</VBox>
					</VBox>
				</VBox>
				<VBox id="commnetTab" class="sapUiTinyMargin">
					<Toolbar height="3rem">
						<Text text="{i18n>Comments}"/>
						<ToolbarSpacer/>
					</Toolbar>
					<VBox class="shadow">
						<VBox width="100%">
							<FeedInput post="onPostComment" showIcon="false" maxLength="199" value="{nonPOInvoiceModel>/input}"/>
							<List items="{nonPOInvoiceModel>/invoiceDetailUIDto/commentDto}" showSeparators="Inner" growing="true" growingThreshold="4">
								<FeedListItem sender="{nonPOInvoiceModel>createdBy}" iconDensityAware="false"
									timestamp="{path:'nonPOInvoiceModel>createdAt', formatter:'com.menabev.AP.util.formatter.commentDate'}" text="{nonPOInvoiceModel>comment}">
									<FeedListItemAction icon="sap-icon://delete" press="fnDeleteComment" text="Delete"></FeedListItemAction>
									<FeedListItemAction icon="sap-icon://edit" press="fnEditComment" text="Edit"></FeedListItemAction>
								</FeedListItem>
							</List>
						</VBox>
					</VBox>
				</VBox>
				<VBox id="pdftableVbox" visible="false">
					<!--<core:Fragment fragmentName="com.inc.ApWorkbench.view.fragment.pdfTable" type="XML" id="pdftable"/>-->
				</VBox>
			</VBox>
		</content>
		<footer>
			<Toolbar>
				<ToolbarSpacer/>
				<Button text="{i18n>Save}" type="Default" tooltip="{i18n>Save}" press="onNonPoSave" class="sapUiTinyMarginEnd"/>
				<Button text="{i18n>Submit}" type="Emphasized" tooltip="{i18n>Submit}" press="onNonPoSubmit" class="btnEmphasized sapUiTinyMarginEnd"/>
				<Button text="{i18n>Reject}" type="Reject" tooltip="{i18n>Reject}" press="onNonPoReject" class="sapUiTinyMarginEnd" enabled="false"/>
			</Toolbar>
		</footer>
	</Page>
</mvc:View>