<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" controllerName="com.menabev.AP.controller.NonPOInvoice"
	xmlns:html="http://www.w3.org/1999/xhtml" xmlns:l="sap.ui.layout" xmlns:u="sap.ui.unified">
	<Page title="Title" class="sapUiSizeCompact page">
		<customHeader>
			<OverflowToolbar>
				<!--<content>-->
				<Button icon="sap-icon://nav-back" press="onNavBack"/>
				<Title text="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/requestId}"></Title>
				<ToolbarSpacer/>
				<Label text="{i18n>InvoiceAmount}" design="Bold" required="true" class="sapUiLargeMarginBegin "/>
				<Text
					text="{path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency',formatter:'com.menabev.AP.formatter.formatter.currencySymbolWithValue'}"/>
				<Input change="hdrInvAmtCalu" width="120px" type="Number" value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/invoiceTotal}"
					valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/invoiceTotal}" editable="{oVisibilityModel>/NonPOInvoice/editable}"/>
				<Label text="{i18n>GrossAmt}" design="Bold"/>
				<Text
					text="{path :'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency', formatter:'com.menabev.AP.formatter.formatter.currencySymbolWithValue'}"
					tooltip="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency}"/>
				<Input width="9%" enabled="false" textAlign="Right"
					value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/grossAmount', type: 'sap.ui.model.type.Float'}"/>
				<Label text="{i18n>balance}" design="Bold"/>
				<Text
					text="{path :'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency', formatter:'com.menabev.AP.formatter.formatter.currencySymbolWithValue'}"
					tooltip="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/currency}"/>
				<Input width="9%" enabled="false" textAlign="Right"
					value="{path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/balance', type: 'sap.ui.model.type.Float'}"/>
				<Button icon="sap-icon://process" tooltip="{i18n>showTracker}" visible="false"/>
				<!--</content>-->
			</OverflowToolbar>
		</customHeader>
		<content>
			<l:Splitter id="idMainSplitter" width="100%">
				<VBox>
					<VBox id="invoiceDetailTab" class="sapUiTinyMargin nonPOHeader">
						<Toolbar height="3rem">
							<Title level="H2" text="{i18n>InvoiceHeaderDetails}" class="headerTitle sapUiTinyMarginBegin"/>
							<ToolbarSpacer/>
							<Button text="{i18n>VendorBalances}" press="onClickVendorBalances" class="sapUiSizeCompact SecondaryBtn"/>
							<Button icon="sap-icon://activity-individual" tooltip="{i18n>ActivityLog}" press="onClickActivityLog" class="SecondaryBtn" enabled="false"/>
							<!--<Button icon="sap-icon://notification-2" tooltip="{i18n>ErrorMessages}" press="onClickErrorMessages" class="SecondaryBtn" enabled="false"/>-->
							<Button text="{i18n>OpenPdf}" type="Emphasized" id="idOpenPDFBtn" tooltip="Open Pdf" press="onPressOpenpdf"
								visible="{nonPOInvoiceModel>/openPdfBtnVisible}"/>
							<!--<Button icon="sap-icon://refresh" press="onPressRefresh" class="SecondaryBtn" enabled="false"/>-->
						</Toolbar>
						<l:Grid id="grid" defaultSpan="L3 M6 S12">
							<l:content>
								<VBox>
									<Label text="{i18n>VendorId}" required="true" class="sapUiTinyMarginTop"/>
									<!--<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorId}" width="80%"-->
									<!--	editable="{oVisibilityModel>/NonPOInvoice/editable}"/>-->
									<Input filterSuggests="false" value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorId}" width="80%" showSuggestion="true"
										suggest="VendorIdSuggest" tooltip="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorId}" suggestionItemSelected="vendorIdSelected"
										suggestionItems="{searchVendorModel>/d/results}" maxLength="10" editable="{oVisibilityModel>/NonPOInvoice/editable}">
										<suggestionItems>
											<core:ListItem text="{searchVendorModel>Supplier}" additionalText="{searchVendorModel>SupplierName}"/>
										</suggestionItems>
									</Input>
								</VBox>
								<VBox>
									<Label text="{i18n>VendorName}" class="sapUiTinyMarginTop"/>
									<!--<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorName}" width="80%"-->
									<!--	editable="{oVisibilityModel>/NonPOInvoice/editable}"/>-->
									<Input filterSuggests="false" value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorName}" width="80%" type="Text"
										showSuggestion="true" suggest="VendorNameSuggest" tooltip="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/vendorName}"
										suggestionItemSelected="vendorNameSelected" suggestionItems="{searchVendorModel>/d/results}"
										editable="{oVisibilityModel>/NonPOInvoice/editable}">
										<suggestionItems>
											<core:ListItem text="{searchVendorModel>SupplierName}" additionalText="{searchVendorModel>Supplier}"/>
										</suggestionItems>
									</Input>
								</VBox>
								<VBox>
									<Label text="{i18n>CompanyCode}" class="sapUiTinyMarginTop"/>
									<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/companyCode}" width="80%" change="onChangeCompanyCode" maxLength="4"
										valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/companyCode}" editable="{oVisibilityModel>/NonPOInvoice/editable}"
										liveChange="inputNANCheck"/>
								</VBox>
								<VBox>
									<Label required="true" text="{i18n>InvoiceNo}" class="sapUiTinyMarginTop"/>
									<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/extInvNum}" width="80%" change="onChangeInvNumber" maxLength="16"
										valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/extInvNum}" editable="{oVisibilityModel>/NonPOInvoice/editable}"/>
								</VBox>
								<VBox id="idDate">
									<Label text="{i18n>InvoiceDate}" required="true"/>
									<DatePicker valueFormat="yyyy-MM-dd" displayFormat="MM/dd/YYYY" width="80%"
										value="{ path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/invoiceDate',formatter: 'com.menabev.AP.formatter.formatter.getDate'}"
										valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/invoiceDate}" change="onChangeInvDate"
										editable="{oVisibilityModel>/NonPOInvoice/editable}"/>
								</VBox>
								<VBox>
									<Label text="{i18n>BatchId}"/>
									<Input value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/ocrBatchId}" width="80%"
										editable="{oVisibilityModel>/NonPOInvoice/editable}"/>
								</VBox>
								<VBox >
									<Label text="{i18n>PostingDate}" required="true"/>
									<DatePicker displayFormat="MM/dd/YYYY" valueFormat="yyyy-MM-dd" width="80%"
										value="{ path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/postingDate',formatter: 'com.menabev.AP.formatter.formatter.getDate'}"
										valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/postingDate}" change="onPostingDateChange"
										editable="{oVisibilityModel>/NonPOInvoice/editable}"/>
								</VBox>
								<VBox >
									<Label text="{i18n>DueDate}"/>
									<DatePicker displayFormat="MM/dd/YYYY" valueFormat="yyyy-MM-dd" width="80%"
										value="{path:'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/dueDate',formatter: 'com.menabev.AP.formatter.formatter.getDate'}"
										editable="{oVisibilityModel>/NonPOInvoice/editable}" change="onDueDateChange"/>
								</VBox>
								<VBox >
									<Label text="{i18n>PaymentTerms}"/>
									<Select forceSelection="false" selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/paymentTerms}"
										items="{oDropDownModel>/paymentTermResult}" width="80%" editable="{oVisibilityModel>/NonPOInvoice/editable}">
										<items>
											<core:ListItem key="{oDropDownModel>PmntTerm}" text="{oDropDownModel>PmntTermDesc}"/>
										</items>
									</Select>
								</VBox>
								<VBox >
									<Label text="{i18n>PaymentMethod}"/>
									<Select forceSelection="false" selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/paymentMethod}"
										items="{oDropDownModel>/paymentMethodResult}" width="80%" editable="{oVisibilityModel>/NonPOInvoice/editable}">
										<items>
											<core:ListItem key="{oDropDownModel>PmntMeth}" text="{oDropDownModel>PmntMethName}"/>
										</items>
									</Select>
								</VBox>
								<VBox>
									<Label text="{i18n>PaymentBlock}"/>
									<Select forceSelection="false" selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/paymentBlock}"
										items="{oDropDownModel>/paymentBlockResult}" width="80%" editable="{oVisibilityModel>/NonPOInvoice/editable}">
										<items>
											<core:ListItem key="{oDropDownModel>PmntBlk}" text="{oDropDownModel>PmntBlkDesc}"/>
										</items>
									</Select>
								</VBox>
								<VBox>
									<Label text="{i18n>TaxCode}"/>
									<Select forceSelection="false" id="taxCodeId" showSecondaryValues="true" valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/taxCode}"
										selectedKey="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/taxCode}" items="{oDropDownModel>/taxCodeResult}" width="80%"
										change="onChangeHeaderTax" editable="{oVisibilityModel>/NonPOInvoice/editable}" columnRatio="1:3">
										<items>
											<core:ListItem key="{oDropDownModel>TxCode}" text="{oDropDownModel>TxCode}" additionalText="{oDropDownModel>TaxCodeName}"/>
										</items>
									</Select>
								</VBox>
							</l:content>
						</l:Grid>
					</VBox>
					<VBox class="tableBox sapUiTinyMargin">
						<Toolbar height="3rem">
							<ToolbarSpacer/>
							<Button text="{i18n>ManageTemplates}" press="onClickManageTemplate" enabled="{oVisibilityModel>/NonPOInvoice/editable}"/>
							<Button text="{i18n>SelectTemplate}" tooltip="Select Template" press="onSelectTemplate" class="sapUiSizeCompact SecondaryBtn"
								enabled="{oVisibilityModel>/NonPOInvoice/editable}"/>
							<Button text="{i18n>AddRow}" tooltip="{i18n>AddItems}" id="addId" icon="sap-icon://add" class="SecondaryBtn" press="addItem"
								enabled="{oVisibilityModel>/NonPOInvoice/editable}"/>
							<Button icon="sap-icon://excel-attachment" tooltip="{i18n>DownloadExcel}" press="onDataExportExcel" class="SecondaryBtn" visible="false"/>
							<u:FileUploader id="fileUploaderId" icon="sap-icon://upload" iconOnly="true" maximumFileSize="10" fileType="XLSX" buttonOnly="true"
								tooltip="{i18n>ImportFromExcel}" change="handleImportFromExcel" fileSizeExceed="onFileSizeExceed" class="SecondaryBtn" visible="false"/>
							<Button icon="sap-icon://action-settings" press="onPressPersonalization" class="SecondaryBtn" enabled="false"/>
						</Toolbar>
						<core:Fragment fragmentName="com.menabev.AP.fragment.NonPOCostCenter" type="XML" id="prefix1"/>
					</VBox>
					<VBox class="tableBox sapUiTinyMargin">
						<OverflowToolbar class="sapUiTinyMargin">
							<Label text="{i18n>SubTotal}"></Label>
							<Input width="9.5rem" enabled="false"
								value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/totalBaseRate', type: 'sap.ui.model.type.Float'}">
								<layoutData>
									<OverflowToolbarLayoutData shrinkable="true" minWidth="100px"/>
								</layoutData>
							</Input>
							<ToolbarSpacer/>
							<Label text="{i18n>Tax}"/>
							<Input width="4rem" value="{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/taxValue}" type="Number"
								valueState="{nonPOInvoiceModel>/invoiceDetailUIDto/vstate/taxValue}" change="onChangeUserInputTaxAmount"
								editable="{oVisibilityModel>/NonPOInvoice/editable}">
								<layoutData>
									<OverflowToolbarLayoutData shrinkable="true" minWidth="100px"/>
								</layoutData>
							</Input>
							<Text text="/{nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/taxAmount}"/>
							<Button icon="sap-icon://notes" press="openTaxDetails" type="Emphasized" tooltip="{i18n>TaxDetails}"/>
							<ToolbarSpacer/>
							<Label text="{i18n>Freight}">
								<layoutData>
									<OverflowToolbarLayoutData group="3"/>
								</layoutData>
							</Label>
							<Input width="9.5rem" value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/shippingCost', type: 'sap.ui.model.type.Float'}"
								enabled="false">
								<layoutData>
									<OverflowToolbarLayoutData shrinkable="true" minWidth="100px" group="3"/>
								</layoutData>
							</Input>
							<ToolbarSpacer/>
							<Label text="{i18n>Surcharges}">
								<layoutData>
									<OverflowToolbarLayoutData group="4"/>
								</layoutData>
							</Label>
							<Input width="9.5rem" value="0.00" enabled="false">
								<layoutData>
									<OverflowToolbarLayoutData shrinkable="true" minWidth="100px" group="4"/>
								</layoutData>
							</Input>
							<ToolbarSpacer/>
							<Label text="{i18n>GrossAmt}">
								<layoutData>
									<OverflowToolbarLayoutData group="5"/>
								</layoutData>
							</Label>
							<Input width="9.5rem" value="{path: 'nonPOInvoiceModel>/invoiceDetailUIDto/invoiceHeader/grossAmount', type: 'sap.ui.model.type.Float'}"
								enabled="false">
								<layoutData>
									<OverflowToolbarLayoutData shrinkable="true" minWidth="100px" group="5"/>
								</layoutData>
							</Input>
						</OverflowToolbar>
					</VBox>
					<IconTabBar>
						<items>
							<IconTabFilter text="{i18n>ATTACHMENTS}" key="attachments">
								<core:Fragment fragmentName="com.menabev.AP.fragment.Attachment" type="XML"/>
							</IconTabFilter>
							<IconTabFilter text="{i18n>COMMENTS}" key="comments">
								<core:Fragment fragmentName="com.menabev.AP.fragment.Comments" type="XML"/>
							</IconTabFilter>
						</items>
					</IconTabBar>
					<VBox>
						<l:Grid id="grid2" vSpacing="1" hSpacing="0" defaultSpan="L3 M6 S12">
							<l:content></l:content>
						</l:Grid>
					</VBox>
				</VBox>
			</l:Splitter>
		</content>
		<footer>
			<Toolbar>
				<ToolbarSpacer/>
				<Button text="{i18n>Approve}" type="Default" tooltip="{i18n>Approve}" press="onNonPoApprove" class="sapUiTinyMarginEnd"
					visible="{oVisibilityModel>/NonPOInvoice/PLBtnVisible}" enabled="false"/>
				<Button text="{i18n>ReSend}" type="Default" tooltip="{i18n>ReSend}" press="onNonPoReSend" class="sapUiTinyMarginEnd"
					visible="{oVisibilityModel>/NonPOInvoice/PLBtnVisible}" enabled="false"/>
				<Button text="{i18n>Save}" type="Default" tooltip="{i18n>Save}" press="onNonPoSave" class="sapUiTinyMarginEnd"
					visible="{oVisibilityModel>/NonPOInvoice/AccBtnVisible}"/>
				<Button text="{i18n>Submit}" type="Emphasized" tooltip="{i18n>Submit}" press="onNonPoSubmit" class="btnEmphasized sapUiTinyMarginEnd"
					visible="{oVisibilityModel>/NonPOInvoice/AccBtnVisible}"/>
				<Button text="{i18n>Reject}" type="Reject" tooltip="{i18n>Reject}" press="onNonPoReject" class="sapUiTinyMarginEnd" enabled="false"
					visible="{oVisibilityModel>/NonPOInvoice/PLBtnVisible}"/>
			</Toolbar>
		</footer>
	</Page>
</mvc:View>